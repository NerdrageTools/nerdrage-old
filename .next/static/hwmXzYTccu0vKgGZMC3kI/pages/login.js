(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{O2ls:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return E});var a=n("UrUy"),r=n.n(a),c=n("JYC+"),u=n.n(c),l=n("R3/3"),s=n("LkAs"),o=n("bMj6"),d=n("hZod"),f=n("tEuJ"),i=n("YKN3"),b=n("azxR"),m=n("sPpl"),p=n.n(m),O=n("dAGg"),j=n.n(O),g=n("mXGw"),h=n.n(g),w=n("lTgw"),E=(n("4W9Y"),function(e){function t(){var e,n;Object(s.default)(this,t);for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];return n=Object(o.default)(this,(e=Object(d.default)(t)).call.apply(e,[this].concat(c))),Object(b.a)(Object(i.default)(Object(i.default)(n)),"username",h.a.createRef()),Object(b.a)(Object(i.default)(Object(i.default)(n)),"password",h.a.createRef()),Object(b.a)(Object(i.default)(Object(i.default)(n)),"componentDidMount",function(){n.username.current.focus()}),Object(b.a)(Object(i.default)(Object(i.default)(n)),"handleKeyPress",function(e){"Enter"===e.key&&n.handleSubmit()}),Object(b.a)(Object(i.default)(Object(i.default)(n)),"handleSubmit",Object(l.default)(r.a.mark(function e(){var t,a,c,l,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.username.current.value,a=n.password.current.value,e.next=4,p()("/api/user/login",{body:u()({password:a,username:t}),headers:{"Content-Type":"application/json"},method:"POST"});case 4:return c=e.sent,e.next=7,c.json();case 7:l=e.sent,200===c.status?(s=n.context.router.query.redirectTo,n.context.setUser(l),s&&j.a.push(s)):n.setState(l);case 9:case"end":return e.stop()}},e,this)}))),Object(b.a)(Object(i.default)(Object(i.default)(n)),"renderLoggedIn",function(){return h.a.createElement(h.a.Fragment,null,h.a.createElement("p",null,"You are currently logged in as user ",h.a.createElement("b",null,n.context.user.username),"."),h.a.createElement("div",{className:"buttons"},h.a.createElement("button",{className:"login",onClick:n.context.logOff},"Log Off")))}),Object(b.a)(Object(i.default)(Object(i.default)(n)),"renderLogIn",function(){return h.a.createElement(h.a.Fragment,null,h.a.createElement("h3",null,"Log In"),h.a.createElement("input",{type:"text",placeholder:"Username",ref:n.username,onKeyPress:n.handleKeyPress}),h.a.createElement("input",{type:"password",placeholder:"Password",ref:n.password,onKeyPress:n.handleKeyPress}),h.a.createElement("div",{className:"buttons"},h.a.createElement("button",{className:"login",onClick:n.handleSubmit},"Submit")))}),Object(b.a)(Object(i.default)(Object(i.default)(n)),"render",function(){var e=n.context.user.anonymous;return h.a.createElement("div",{className:"login page"},h.a.createElement("div",{className:"container"},e?n.renderLogIn():n.renderLoggedIn()))}),n}return Object(f.default)(t,e),t}(g.Component));Object(b.a)(E,"contextType",w.a)},qpEA:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){var e=n("O2ls");return{page:e.default||e}}])}},[["qpEA",1,0,2]]]);