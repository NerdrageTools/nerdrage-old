{"version":3,"file":"static/webpack/static/development/pages/_app.js.0a1115d6cb6c462be1e7.hot-update.js","sources":["webpack:///./components/Navigation/Navigation.js"],"sourcesContent":["import React, { Component } from 'react'\nimport { Scrollbars } from 'react-custom-scrollbars'\nimport Sortable from 'sortablejs'\nimport ArticleLink from '@/components/ArticleLink'\nimport Application from '@/contexts/Application'\nimport noop from '@/utilities/noop'\nimport pluck from '@/utilities/pluck'\nimport './Navigation.scss'\n\nexport default class Navigation extends Component {\n  static contextType = Application\n  static defaultProps = {\n    items: [],\n    onItemClick: noop,\n    wrapperRef: noop,\n  }\n\n  campaignLinks = React.createRef()\n\n  componentDidMount() {\n    this.sortable = Sortable.create(this.campaignLinks.current, {\n      disabled: !this.context.campaign.isEditor,\n      draggable: '.list-item-wrapper',\n      handle: '.drag-handle',\n      onEnd: () => {\n        this.container.current.classList.remove('dragging')\n        this.props.collection.replace(\n          [...this.container.current.querySelectorAll('.list-item-wrapper')]\n            .map(item => parseInt(item.getAttribute('data-index'), 10))\n            .map(targetIndex => this.props.collection.at(targetIndex))\n        )\n      },\n      onStart: () => this.container.current.classList.add('dragging'),\n    })\n  }\n\n  renderList = (list = [], listTitle = '', type = 'article') => (\n    Boolean(list.length) && <>\n      <b>{listTitle}</b>\n      <ul>\n        {list.filter(item => item.campaign.domain === this.context.campaign.domain)\n          .map(({ campaign = {}, slug, title }, key) => {\n            const { domain = '', title: cTitle = '' } = campaign\n            let text = title\n            if (type !== 'campaign' && domain && domain !== this.context.domain) {\n              text += ` (${cTitle || domain})`\n            }\n\n            return (\n              <li key={key}>\n                <ArticleLink\n                  {...{ campaign, slug, type }}\n                  active={this.context.domain === domain && this.context.router.asPath === `/${type}/${slug}`}\n                  onClick={this.props.onItemClick}\n                >\n                  {text}\n                </ArticleLink>\n              </li>\n            )\n          })}\n      </ul>\n    </>\n  )\n\n  render = () => {\n    const { campaign, user = {} } = this.context\n    const { favorites = [], sheets = [] } = user\n\n    if (!campaign) return null\n\n    const navigation = campaign.navigation.map(link => ({\n      ...link,\n      campaign: pluck(campaign, '_id', 'domain', 'title'),\n    }))\n\n    return (\n      <Scrollbars className=\"navigation\" autoHide universal>\n        <div className=\"content\" ref={this.props.wrapperRef}>\n          <div className=\"campaign-nav\" ref={this.campaignLinks}>\n            {this.renderList(navigation, campaign.title)}\n          </div>\n          {user && <>\n            {this.renderList(favorites, 'My Favorites')}\n            {this.renderList(sheets, 'My Sheets', 'sheet')}\n          </>}\n        </div>\n      </Scrollbars>\n    )\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AAQA;AACA;AAkBA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAHA;AASA;AAvBA;AACA;AA2BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAEA;AAAA;AAEA;AAFA;AAAA;AAKA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAUA;AACA;;;;;;AAtEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AAZA;AAcA;;;;AAzBA;AACA;AADA;AACA;AADA;AAGA;AACA;AACA;AAHA;AACA;;;;;A","sourceRoot":""}