(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{O2ls:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return y});var n=a("UrUy"),r=a.n(n),c=a("Rbzu"),u=a("JYC+"),s=a.n(u),l=a("R3/3"),o=a("LkAs"),d=a("bMj6"),f=a("hZod"),b=a("tEuJ"),i=a("YKN3"),m=a("azxR"),O=a("sPpl"),j=a.n(O),p=a("dAGg"),g=a.n(p),h=a("mXGw"),w=a.n(h),E=a("lTgw"),y=(a("ukGE"),function(e){function t(){var e,a;Object(o.default)(this,t);for(var n=arguments.length,u=new Array(n),b=0;b<n;b++)u[b]=arguments[b];return a=Object(d.default)(this,(e=Object(f.default)(t)).call.apply(e,[this].concat(u))),Object(m.a)(Object(i.default)(Object(i.default)(a)),"username",w.a.createRef()),Object(m.a)(Object(i.default)(Object(i.default)(a)),"password",w.a.createRef()),Object(m.a)(Object(i.default)(Object(i.default)(a)),"state",{message:""}),Object(m.a)(Object(i.default)(Object(i.default)(a)),"componentDidMount",function(){a.username.current.focus()}),Object(m.a)(Object(i.default)(Object(i.default)(a)),"handleKeyPress",function(e){"Enter"===e.key&&a.handleSubmit()}),Object(m.a)(Object(i.default)(Object(i.default)(a)),"handleUsername",function(e){var t=e.target;t.value=t.value.toLowerCase()}),Object(m.a)(Object(i.default)(Object(i.default)(a)),"handleSubmit",Object(l.default)(r.a.mark(function e(){var t,n,u,l,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.username.current.value,n=a.password.current.value,e.next=4,j()("/api/user/login",{body:s()({password:n,username:t}),headers:{"Content-Type":"application/json"},method:"POST"});case 4:return u=e.sent,e.next=7,u.json();case 7:l=e.sent,200===u.status?(o=a.context.router.query.redirectTo,a.context.setUser(l),o&&g.a.push(o)):a.setState(Object(c.a)({message:""},l));case 9:case"end":return e.stop()}},e,this)}))),Object(m.a)(Object(i.default)(Object(i.default)(a)),"renderLoggedIn",function(){return w.a.createElement(w.a.Fragment,null,w.a.createElement("p",null,"You are currently logged in as user ",w.a.createElement("b",null,a.context.user.username),"."),w.a.createElement("div",{className:"buttons"},w.a.createElement("button",{className:"link",onClick:a.context.logOff},"Log Off")))}),Object(m.a)(Object(i.default)(Object(i.default)(a)),"renderLogIn",function(){return w.a.createElement(w.a.Fragment,null,w.a.createElement("h3",null,"Log In"),w.a.createElement("input",{type:"text",placeholder:"Username or Email",ref:a.username,onChange:a.handleUsername,onKeyPress:a.handleKeyPress}),w.a.createElement("input",{type:"password",placeholder:"Password",ref:a.password,onKeyPress:a.handleKeyPress}),w.a.createElement("div",{className:"buttons"},w.a.createElement("button",{className:"safe",onClick:a.handleSubmit},"Submit")),w.a.createElement("center",{className:"message-field"},a.state.message))}),Object(m.a)(Object(i.default)(Object(i.default)(a)),"render",function(){var e=a.context.user.anonymous;return w.a.createElement("div",{className:"login page"},w.a.createElement("div",{className:"container"},e?a.renderLogIn():a.renderLoggedIn()))}),a}return Object(b.default)(t,e),t}(h.Component));Object(m.a)(y,"contextType",E.a)},qpEA:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){var e=a("O2ls");return{page:e.default||e}}])}},[["qpEA",1,0,2]]]);