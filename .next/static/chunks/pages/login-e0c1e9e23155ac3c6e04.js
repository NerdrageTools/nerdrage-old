_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[22],{"0942":function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},"0II3":function(e,t,n){"use strict";var r=self.fetch.bind(self);e.exports=r,e.exports.default=e.exports},CHlC:function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",(function(){return o}))},O2ls:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));var r=n("NthX"),o=n.n(r),c=n("eijD"),a=n("hisu"),u=n("0942"),s=n("CHlC"),i=n("kMo5"),f=n("P+uj"),l=n("mK0O"),b=n("oYCi"),p=n("0II3"),d=n.n(p),j=n("mXGw"),O=n.n(j),y=n("qhEq");n("ukGE");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var v=function(e){Object(s.a)(n,e);var t=g(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return e=t.call.apply(t,[this].concat(s)),Object(l.a)(Object(u.a)(e),"username",O.a.createRef()),Object(l.a)(Object(u.a)(e),"password",O.a.createRef()),Object(l.a)(Object(u.a)(e),"state",{message:""}),Object(l.a)(Object(u.a)(e),"componentDidMount",(function(){e.context.user.anonymous?e.username.current.focus():e.handleRedirect()})),Object(l.a)(Object(u.a)(e),"handleKeyPress",(function(t){"Enter"===t.key&&e.handleSubmit()})),Object(l.a)(Object(u.a)(e),"handleUsername",(function(e){var t=e.target;t.value=t.value.toLowerCase()})),Object(l.a)(Object(u.a)(e),"handleRedirect",(function(){var t=e.context.router,n=t.query.redirectTo;n&&t.push(n)})),Object(l.a)(Object(u.a)(e),"handleSubmit",Object(c.a)(o.a.mark((function t(){var n,r,c,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username.current.value,r=e.password.current.value,t.next=4,d()("/api/user/auth/login",{body:JSON.stringify({password:r,username:n}),headers:{"Content-Type":"application/json"},method:"POST"});case 4:return c=t.sent,t.next=7,c.json();case 7:a=t.sent,200===c.status?(e.context.setUser(a),e.context.updateCampaign(),e.handleRedirect()):e.setState(m({message:""},a));case 9:case"end":return t.stop()}}),t)})))),Object(l.a)(Object(u.a)(e),"renderLoggedIn",(function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{children:["You are currently logged in as user ",Object(b.jsx)("b",{children:e.context.user.username}),"."]}),Object(b.jsx)("div",{className:"buttons",children:Object(b.jsx)("button",{className:"link",onClick:e.context.logOff,children:"Log Off"})})]})})),Object(l.a)(Object(u.a)(e),"renderLogIn",(function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{children:"Log In"}),Object(b.jsx)("input",{type:"text",placeholder:"Username or Email",ref:e.username,onChange:e.handleUsername,onKeyPress:e.handleKeyPress}),Object(b.jsx)("input",{type:"password",placeholder:"Password",ref:e.password,onKeyPress:e.handleKeyPress}),Object(b.jsx)("div",{className:"buttons",children:Object(b.jsx)("button",{className:"safe",onClick:e.handleSubmit,children:"Submit"})}),Object(b.jsx)("center",{className:"message-field",children:e.state.message})]})})),Object(l.a)(Object(u.a)(e),"render",(function(){var t=e.context.user.anonymous;return Object(b.jsx)("div",{className:"login page",children:Object(b.jsx)("div",{className:"container",children:t?e.renderLogIn():e.renderLoggedIn()})})})),e}return n}(j.Component);Object(l.a)(v,"contextType",y.a)},"P+uj":function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},eijD:function(e,t,n){"use strict";function r(e,t,n,r,o,c,a){try{var u=e[c](a),s=u.value}catch(i){return void n(i)}u.done?t(s):Promise.resolve(s).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,c){var a=e.apply(t,n);function u(e){r(a,o,c,u,s,"next",e)}function s(e){r(a,o,c,u,s,"throw",e)}u(void 0)}))}}n.d(t,"a",(function(){return o}))},hisu:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},kMo5:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return c}));var o=n("0942");function c(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?Object(o.a)(e):t}},mK0O:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},qhEq:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("mXGw"),o=n.n(r).a.createContext({campaign:{createdAt:null,createdBy:{},editors:[],lastUpdatedAt:null,lastUpdatedBy:{},navigation:[],owners:[],secret:!1,subdomain:"",theme:{background:"#fff",fontFamily:"Ubuntu",normalText:"#333",primary:"#42afe3",primaryText:"#fff"},title:"New Campaign",version:0},router:{},rootUrl:"",subdomain:"",user:{anonymous:!0}})},qpEA:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n("O2ls")}])}},[["qpEA",1,2,3,0]]]);