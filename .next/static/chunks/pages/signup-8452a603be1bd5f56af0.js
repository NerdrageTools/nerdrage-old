_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[25],{"0942":function(e,t,n){"use strict";function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return a}))},CHlC:function(e,t,n){"use strict";function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}n.d(t,"a",(function(){return r}))},"P+uj":function(e,t,n){"use strict";function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return a}))},V3TE:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup",function(){return n("vL9u")}])},eijD:function(e,t,n){"use strict";function a(e,t,n,a,r,c,o){try{var s=e[c](o),i=s.value}catch(u){return void n(u)}s.done?t(i):Promise.resolve(i).then(a,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,c){var o=e.apply(t,n);function s(e){a(o,r,c,s,i,"next",e)}function i(e){a(o,r,c,s,i,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return r}))},hisu:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return a}))},kMo5:function(e,t,n){"use strict";function a(e){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return c}));var r=n("0942");function c(e,t){return!t||"object"!==a(t)&&"function"!==typeof t?Object(r.a)(e):t}},mK0O:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a}))},qhEq:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("mXGw"),r=n.n(a).a.createContext({campaign:{createdAt:null,createdBy:{},editors:[],lastUpdatedAt:null,lastUpdatedBy:{},navigation:[],owners:[],secret:!1,subdomain:"",theme:{background:"#fff",fontFamily:"Ubuntu",normalText:"#333",primary:"#42afe3",primaryText:"#fff"},title:"New Campaign",version:0},router:{},rootUrl:"",subdomain:"",user:{anonymous:!0}})},vL9u:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));var a=n("NthX"),r=n.n(a),c=n("eijD"),o=n("hisu"),s=n("0942"),i=n("CHlC"),u=n("kMo5"),l=n("P+uj"),d=n("mK0O"),f=n("oYCi"),p=n("mXGw"),b=n.n(p),m=n("qhEq");n("ukGE");function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var v=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,y=/^.*(?=.{8,})((?=.*[!@#$%^&*()\-_=+{};:,<.>]){1})(?=.*\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/,w=/[a-zA-Z0-9_-]{4,}/,g=function(e){Object(i.a)(n,e);var t=O(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),u=0;u<a;u++)i[u]=arguments[u];return e=t.call.apply(t,[this].concat(i)),Object(d.a)(Object(s.a)(e),"state",{valid:!1}),Object(d.a)(Object(s.a)(e),"email",b.a.createRef()),Object(d.a)(Object(s.a)(e),"name",b.a.createRef()),Object(d.a)(Object(s.a)(e),"password",b.a.createRef()),Object(d.a)(Object(s.a)(e),"passwordConfirm",b.a.createRef()),Object(d.a)(Object(s.a)(e),"username",b.a.createRef()),Object(d.a)(Object(s.a)(e),"componentDidMount",(function(){e.name.current.focus()})),Object(d.a)(Object(s.a)(e),"handleEmail",(function(t){var n=t.target;n.value=n.value.toLowerCase(),n.value.match(v)?n.classList.remove("invalid"):n.classList.add("invalid"),e.handleValidated()})),Object(d.a)(Object(s.a)(e),"handlePassword",(function(t){var n=t.target;n.value.match(y)?n.classList.remove("invalid"):n.classList.add("invalid"),e.handleValidated()})),Object(d.a)(Object(s.a)(e),"handlePasswordConfirm",(function(t){var n=t.target;n.value===e.password.current.value?n.classList.remove("invalid"):n.classList.add("invalid"),e.handleValidated()})),Object(d.a)(Object(s.a)(e),"handleUsername",(function(t){var n=t.target;n.value=n.value.toLowerCase().replace(/[^a-z0-9-_]+/g,""),n.value.match(w)?n.classList.remove("invalid"):n.classList.add("invalid"),e.handleValidated()})),Object(d.a)(Object(s.a)(e),"handleValidated",(function(){var t=!0;["email","password","passwordConfirm","username"].forEach((function(n){var a=e[n].current;a.value&&!a.matches(":invalid, .invalid")||(t=!1)})),e.setState({valid:t})})),Object(d.a)(Object(s.a)(e),"handleKeyPress",(function(t){switch(t.key){case"Enter":e.handleSubmit();break;case"Escape":e.context.router.back()}})),Object(d.a)(Object(s.a)(e),"handleSubmit",Object(c.a)(r.a.mark((function t(){var n,a,c,o,s,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.valid){t.next=2;break}return t.abrupt("return");case 2:return n=e.email.current.value,a=e.name.current.value,c=e.password.current.value,o=e.username.current.value,t.next=8,fetch("/api/user",{body:JSON.stringify({email:n,name:a,password:c,username:o}),headers:{"Content-Type":"application/json"},method:"PUT"});case 8:return s=t.sent,t.next=11,s.json();case 11:i=t.sent,200===s.status?e.context.router.push("/user?username=".concat(o),"/user/".concat(o)):e.setState(h({message:""},i));case 13:case"end":return t.stop()}}),t)})))),Object(d.a)(Object(s.a)(e),"render",(function(){return Object(f.jsx)("div",{className:"signup page",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h3",{children:"Sign Up"}),Object(f.jsx)("input",{onChange:e.handleValidated,onKeyDown:e.handleKeyPress,placeholder:"Name (optional)",ref:e.name,type:"text"}),Object(f.jsx)("input",{onChange:e.handleUsername,onKeyDown:e.handleKeyPress,pattern:"[a-zA-Z0-9_-]{4,}",placeholder:"Username",ref:e.username,type:"text"}),Object(f.jsx)("span",{className:"validation-message",children:"Length: 4+, letters, numbers, _ & -"}),Object(f.jsx)("input",{onChange:e.handleEmail,onKeyDown:e.handleKeyPress,placeholder:"Email Address",ref:e.email,type:"email"}),Object(f.jsx)("span",{className:"validation-message",children:"Must be a valid e-mail address"}),Object(f.jsx)("input",{onChange:e.handlePassword,onKeyDown:e.handleKeyPress,placeholder:"Password",ref:e.password,type:"password"}),Object(f.jsx)("span",{className:"validation-message",children:"At least 8 characters; must include one a-z, one A-Z, one 0-9 and 1 special character"}),Object(f.jsx)("input",{onChange:e.handlePasswordConfirm,onKeyDown:e.handleKeyPress,placeholder:"Confirm Password",ref:e.passwordConfirm,type:"password"}),Object(f.jsx)("span",{className:"validation-message",children:"Must match password field"}),Object(f.jsx)("div",{className:"buttons",children:e.state.valid&&Object(f.jsx)("button",{className:"safe",onClick:e.handleSubmit,children:"Submit"})}),Object(f.jsx)("center",{className:"message-field",children:e.state.message})]})})})),e}return n}(p.Component);Object(d.a)(g,"contextType",m.a)}},[["V3TE",1,2,3,0]]]);