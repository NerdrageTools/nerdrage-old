{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Head from 'next/head';\nimport React, { Component } from 'react';\nimport Navigation from '~/components/Navigation/Navigation';\nimport ArticleSearchBox from '~/components/SearchBox/ArticleSearchBox';\nimport UserMenu from '~/components/UserMenu/UserMenu';\nimport { Application } from '~/contexts/Application';\nimport Logo from '~/icons/fist.svg';\nimport NavigationIcon from '~/icons/Navigation';\nimport debounce from '~/utilities/debounce';\nimport './Layout.scss';\n\nvar getWindowSize = function getWindowSize() {\n  if (false) return 'server';\n  if (window.matchMedia('(min-width: 551px) and (max-width: 979px)').matches) return 'medium';\n  if (window.matchMedia('(max-width: 550px)').matches) return 'small';\n  return 'large';\n};\n\nvar Layout = /*#__PURE__*/function (_Component) {\n  _inherits(Layout, _Component);\n\n  var _super = _createSuper(Layout);\n\n  function Layout() {\n    var _this;\n\n    _classCallCheck(this, Layout);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      expanded: false,\n      size: getWindowSize(),\n      ssrDone: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"navigation\", /*#__PURE__*/React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"navigationIcon\", /*#__PURE__*/React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWindowResize\", debounce(function () {\n      var size = getWindowSize();\n\n      _this.setState({\n        size: size\n      });\n\n      _this.context.setSize(size);\n    }, 100));\n\n    _defineProperty(_assertThisInitialized(_this), \"componentDidMount\", function () {\n      _this.setState({\n        ssrDone: true\n      });\n\n      _this.handleWindowResize();\n\n      window.addEventListener('resize', _this.handleWindowResize);\n      document.addEventListener('mousedown', _this.handleOutsideNavClick);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"componentWillUnmount\", function () {\n      window.removeEventListener('resize', _this.handleWindowResize);\n      document.removeEventListener('mousedown', _this.handleOutsideNavClick);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"collapseNavigation\", function () {\n      _this.setState({\n        expanded: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleNavigation\", function () {\n      _this.setState({\n        expanded: !_this.state.expanded\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOutsideNavClick\", function (_ref) {\n      var target = _ref.target;\n\n      if (_this.state.expanded // only collapse if expanded\n      && !_this.navigation.current.contains(target) // and the click isn't in the nav\n      && _this.navigationIcon.current !== target // and the click isn't on the nav icon\n      ) {\n          _this.collapseNavigation();\n        }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"render\", function () {\n      var className = _this.props.className;\n      var _this$context = _this.context,\n          campaign = _this$context.campaign,\n          theme = _this$context.theme;\n      var _this$state = _this.state,\n          expanded = _this$state.expanded,\n          size = _this$state.size;\n      var title = campaign ? campaign.title : 'Unknown Campaign';\n      var classNames = ['wiki layout', className, expanded ? 'expand-navigation' : 'collapse-navigation', _this.state.ssrDone ? size : 'server'].filter(Boolean).join(' ');\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsxs(Head, {\n          children: [/*#__PURE__*/_jsx(\"title\", {\n            children: title\n          }), /*#__PURE__*/_jsx(\"meta\", {\n            name: \"viewport\",\n            content: \"width=device-width, initial-scale=1\"\n          }), /*#__PURE__*/_jsx(\"link\", {\n            href: \"//fonts.googleapis.com/css?family=\".concat(theme.fontForText, \":400,400i,700,700i|\").concat(theme.fontForTitles, \"&display=swap\"),\n            rel: \"stylesheet\"\n          }, \"content-font\")]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: classNames,\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"header\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"logo\",\n              children: [/*#__PURE__*/_jsx(Logo, {\n                className: \"logo x2\"\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"nerd\",\n                children: \"Nerd\"\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"rage\",\n                children: \"RAGE\"\n              })]\n            }), /*#__PURE__*/_jsx(ArticleSearchBox, {}), /*#__PURE__*/_jsx(NavigationIcon, {\n              className: \"navigation toggle\",\n              onClick: _this.toggleNavigation,\n              wrapperRef: _this.navigationIcon\n            }), /*#__PURE__*/_jsx(UserMenu, {})]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"content\",\n            children: [/*#__PURE__*/_jsx(Navigation, {\n              onItemClick: _this.collapseNavigation,\n              wrapperRef: _this.navigation\n            }), _this.props.children]\n          })]\n        })]\n      });\n    });\n\n    return _this;\n  }\n\n  return Layout;\n}(Component);\n\n_defineProperty(Layout, \"contextType\", Application);\n\nexport { Layout as default };","map":null,"metadata":{},"sourceType":"module"}